/*
 *  Screenkeys v1.0.1 Beta
 *  Description: A Javascript plugin to render an onscreen keyboard for websites.
 *  Author: Tejus Pratap
 *  Email: tejuspratap@gmail.com
 *  Website: http://tejuspratap.info/projects/screenkeys
 *  License: MIT License
 */
var screenKey={};screenKey.nonLocal={keysNum:[{name:"0",disp:"0",type:"num"},{name:"1",disp:"1",type:"num"},{name:"2",disp:"2",type:"num"},{name:"3",disp:"3",type:"num"},{name:"4",disp:"4",type:"num"},{name:"5",disp:"5",type:"num"},{name:"6",disp:"6",type:"num"},{name:"7",disp:"7",type:"num"},{name:"8",disp:"8",type:"num"},{name:"9",disp:"9",type:"num"}],keysSymbols:[{name:"~",disp:"~",type:"sym"},{name:"`",disp:"`",type:"sym"},{name:"!",disp:"!",type:"sym"},{name:"@",disp:"@",type:"sym"},{name:"#",disp:"#",type:"sym"},{name:"$",disp:"$",type:"sym"},{name:"%",disp:"%",type:"sym"},{name:"^",disp:"^",type:"sym"},{name:"&",disp:"&",type:"sym"},{name:"*",disp:"*",type:"sym"},{name:"(",disp:"(",type:"sym"},{name:")",disp:")",type:"sym"},{name:"-",disp:"-",type:"sym"},{name:"_",disp:"_",type:"sym"},{name:"+",disp:"+",type:"sym"},{name:"=",disp:"=",type:"sym"},{name:"{",disp:"{",type:"sym"},{name:"}",disp:"}",type:"sym"},{name:"[",disp:"[",type:"sym"},{name:"]",disp:"]",type:"sym"},{name:"|",disp:"|",type:"sym"},{name:"\\",disp:"\\",type:"sym"},{name:";",disp:";",type:"sym"},{name:":",disp:":",type:"sym"},{name:'"',disp:'"',type:"sym"},{name:"&#039;",disp:"&#039;",type:"sym"},{name:"<",disp:"<",type:"sym"},{name:">",disp:">",type:"sym"},{name:",",disp:",",type:"sym"},{name:".",disp:".",type:"sym"},{name:"?",disp:"?",type:"sym"},{name:"/",disp:"/",type:"sym"}]};Array.prototype.shuffle=function(){var b=this.length,a,d,c;if(b==0){return this}while(--b){a=Math.floor(Math.random()*(b+1));d=this[b];c=this[a];this[b]=c;this[a]=d}return this};(function(e,c,a,g){var d="screenKeys",f={locale:"en_US",randomChar:false,container:".screenkeyboard",width:"100%"};function b(i,h){this.element=i;this.options=e.extend({},f,h);this._defaults=f;this._name=d;this.init()}b.prototype={charList:[],isShiftOn:false,isInFormElement:false,container:{},symContainer:"",symContIdentifier:"",symHolder:new Array(),charContainer:"",charContIdentifier:"",charHolder:new Array(),numContainer:"",numContIdentifier:"",showSymbols:false,numHolder:new Array(),funcContainer:"",funcContIdentifier:"",funcHolder:new Array(),clear:"<div class='clear'></div>",out:new Array(),randomSeed:"",renderCharCont:0,renderSymCont:0,keysNum:[],keysSym:[],keysChar:[],keysFunc:[],init:function(){this.randomSeed=Math.floor(Math.random()*1111)+Math.floor(Math.random()*5111);if(screenKey[this.options.locale]==g){alert("Localization for "+this.options.locale+" could not be loaded.");return false}this.symContIdentifier="screenKeySymIden-"+this.randomSeed;this.symContainer=e("<div style='display:none;' class='screenKeySymContainer "+this.symContIdentifier+"'></div>");this.charContIdentifier="screenKeyCharIden-"+this.randomSeed;this.charContainer=e("<div class='screenKeyCharContainer "+this.charContIdentifier+"'></div>");this.numContIdentifier="screenKeyNumIden-"+this.randomSeed;this.numContainer=e("<div class='screenKeyNumContainer "+this.numContIdentifier+"'></div>");this.funcContIdentifier="screenKeyFuncIden-"+this.randomSeed;this.funcContainer=e("<div class='screenKeyFuncContainer "+this.funcContIdentifier+"'></div>"),this.holderElement=e(this.options.container);this.screenKeyIdentifier="screenKeyIden-"+this.randomSeed;this.container=e("<div class='screenKeyContainer "+this.screenKeyIdentifier+"'></div>",this.holderElement);e(this.holderElement).css("width",this.options.width);switch(this.options.locale){case"en_US":this.keysNum=screenKey.nonLocal.keysNum;this.keysSym=screenKey.nonLocal.keysSymbols;this.keysChar=screenKey.en_US.keysChar;this.keysFunc=screenKey.en_US.keysFunc;break;default:this.keysNum=screenKey.nonLocal.keysNum;this.keysSym=screenKey.nonLocal.keysSymbols;this.keysChar=screenKey.en_US.keysChar;this.keysFunc=screenKey.en_US.keysFunc;break}if(this.options.randomChar){this.keysChar.shuffle();this.keysSym.shuffle();this.keysNum.shuffle()}if(e(this.element).is("input")||e(this.element).is("textarea")){this.isInFormElement=true;e(this.element).val("")}else{e(this.element).empty()}this.initKeys();this.renderCharCont=0;this.renderSymCont=0},initKeys:function(i,h){e(this.numContainer).empty();e(this.charContainer).empty();e(this.funcContainer).empty();e(this.symContainer).empty();e(this.container).append(this.numContainer);e(this.container).append(this.clear);e(this.container).append(this.symContainer);e(this.container).append(this.clear);e(this.container).append(this.charContainer);e(this.container).append(this.clear);e(this.container).append(this.funcContainer);e(this.container).append(this.clear);e(this.holderElement).append(this.container);this.keyBoardPaint();this.renderCharCont=0;this.renderSymCont=0},keyBoardPaint:function(){this.renderSymKeys();this.renderNumKeys();this.renderCharKeys();this.renderFuncKeys();this.attachEvents()},renderSymKeys:function(){this.symHolder=new Array();e("."+this.symContIdentifier,this.container).empty();for(var j in this.keysSym){var h=this.keysSym[j];cpClass="aKey screenIndSym sym";if(h.type=="sym"){this.symKeyMaker(h,cpClass)}}e("."+this.symContIdentifier,this.container).append(this.symHolder.join(""))},renderFuncKeys:function(){this.funcHolder=new Array();for(var j in this.keysFunc){var h=this.keysFunc[j];switch(h.name){case"backspace":cpClass="aKey screenIndbackspace";break;case"shift":cpClass="aKey screenIndShift";break;case"carriage":cpClass="aKey screenIndCarriage";break;case"spacebar":cpClass="aKey screenIndSpace";break;case"sym":cpClass="aKey screenIndSymKey";break}if(h.type=="func"){this.funcKeyMaker(h,cpClass)}}e("."+this.funcContIdentifier,this.container).append(this.funcHolder.join(""))},renderNumKeys:function(){this.numHolder=new Array();e("."+this.numContIdentifier,this.container).empty();for(var j in this.keysNum){var h=this.keysNum[j];cpClass="aKey screenIndNum "+h.name+"num";if(h.type=="num"){this.numKeyMaker(h,cpClass)}}e("."+this.numContIdentifier,this.container).append(this.numHolder.join(""))},renderCharKeys:function(){this.charHolder=new Array();e("."+this.charContIdentifier,this.container).empty();for(var j in this.keysChar){var h=this.keysChar[j];cpClass="aKey screenIndChar "+h.name+"char";if(h.type=="char"){this.charKeyMaker(h,cpClass)}}e("."+this.charContIdentifier,this.container).append(this.charHolder.join(""))},shiftPressEvent:function(){e(".screenIndChar",this.holderElement).off("click");this.renderCharKeys();this.attachCharKeyEvents();this.renderCharCont=0},charKeyMaker:function(h,j){var i="";if(this.renderCharCont==10){i="clear: left;margin-left: 5%;"}else{if(this.renderCharCont==19){i="clear: left;margin-left: 12.6%;"}}if(this.isShiftOn){this.charHolder.push("<a href='javascript:void(0);' class='"+j+"' data='"+h.name+"' type='"+h.type+"' style='"+i+"'><span>"+h.disp.toUpperCase()+"</span></a>")}else{this.charHolder.push("<a href='javascript:void(0);' class='"+j+"' data='"+h.name+"' type='"+h.type+"' style='"+i+"'><span>"+h.disp+"</span></a>")}this.renderCharCont++},funcKeyMaker:function(h,i){this.funcHolder.push("<a href='javascript:void(0);' class='"+i+"' data='"+h.name+"' type='"+h.type+"' style=''><span>"+h.disp+"</span></a>")},symKeyMaker:function(h,j){var i="";if(this.renderSymCont==0){i="margin-left: 0.5%;"}else{if(this.renderSymCont==11){i="clear: left;margin-left: 0.5%;"}else{if(this.renderSymCont==22){i="clear: left;margin-left: 5%;"}}}this.symHolder.push("<a href='javascript:void(0);' class='"+j+"' data='"+h.name+"' type='"+h.type+"' style='"+i+"'><span>"+h.disp+"</span></a>");this.renderSymCont++},numKeyMaker:function(h,i){this.numHolder.push("<a href='javascript:void(0);' class='"+i+"' data='"+h.name+"' type='"+h.type+"' style=''><span>"+h.disp+"</span></a>")},attachEvents:function(){var h=this;this.attachShiftKeyEvents();this.attachNumKeyEvents();this.attachCharKeyEvents();this.attachSymKeyEvents();e(".screenIndCarriage",this.holderElement).on("click",function(){h.beforeEvent();h.charList.push("\n");h.afterEvent()});e(".screenIndbackspace",this.holderElement).on("click",function(){h.beforeEvent();h.charList.pop();h.afterEvent()});e(".screenIndSpace",this.holderElement).on("click",function(){h.beforeEvent();h.charList.push(" ");h.afterEvent()});e(".screenIndSymKey",this.holderElement).on("click",function(){h.showSymbols=!h.showSymbols?true:false;h.beforeEvent();e("."+h.symContIdentifier,this.container).slideToggle();e("."+h.charContIdentifier,this.container).slideToggle();if(h.showSymbols){e(".screenIndShift",this.holderElement).off("click")}else{h.attachShiftKeyEvents()}h.afterEvent()})},attachShiftKeyEvents:function(){var h=this;e(".screenIndShift",this.holderElement).on("click",function(){h.isShiftOn=h.isShiftOn?false:true;if(h.isShiftOn){e(this).addClass("shifton")}else{e(this).removeClass("shifton")}h.shiftPressEvent()})},attachSymKeyEvents:function(){var h=this;e(".screenIndSym",this.holderElement).on("click",function(){h.beforeEvent();h.charList.push(e(this).attr("data"));h.afterEvent()})},attachNumKeyEvents:function(){var h=this;e(".screenIndNum",this.holderElement).on("click",function(){h.beforeEvent();h.charList.push(e(this).attr("data"));h.afterEvent()})},attachCharKeyEvents:function(){var h=this;e(".screenIndChar",this.holderElement).on("click",function(){h.beforeEvent();if(h.isShiftOn){h.charList.push(e(this).attr("data").toUpperCase())}else{h.charList.push(e(this).attr("data"))}h.afterEvent()})},beforeEvent:function(){this.updateCharList()},afterEvent:function(){this.paintChars();if(this.isInFormElement){e(this.element).focus()}},updateCharList:function(){if(this.isInFormElement){this.charList=e(this.element).val()}else{this.charList=e(this.element).html()}if(this.charList==""){this.charList=new Array()}else{this.charList=this.charList.split("")}},paintChars:function(){if(this.isInFormElement){e(this.element).val(this.charList.join(""))}else{e(this.element).html(this.charList.join(""))}}};e.fn[d]=function(h){return this.each(function(){if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new b(this,h))}})}})(jQuery,window,document);